/*

Scroll Br0 1.0

Date organised content slider.

Copyright (c) 2014 Br0 (shindiristudio.com)

*/

(function(e){var t={eventToXY:function(e){var t={x:0,y:0};if(e.type=="touchstart"||e.type=="touchmove"||e.type=="touchend"||e.type=="touchcancel"){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX;t.y=n.pageY}else if(e.type=="mousedown"||e.type=="mouseup"||e.type=="mousemove"||e.type=="mouseover"||e.type=="mouseout"||e.type=="mouseenter"||e.type=="mouseleave"){t.x=e.pageX;t.y=e.pageY}return t},refreshInterval:function(){if(typeof window.scrollBro=="undefined"){for(var e in window.scrollBro.scrollers){window.scrollBro.scrollers[e].scrollBro("refresh")}}},refreshParallax:function(e,t,n){var r=e.data("scrollBro");for(var i in r.options.parallaxLayers){var s=r.options.parallaxLayers[i];if(typeof t=="undefined"){var o=e.scrollBro("scrollTop");if(typeof s.addition=="undefined")s.addition=0;if((typeof s.scrollLimitMax=="undefined"||s.scrollLimitMax>o)&&(typeof s.scrollLimitMin=="undefined"||s.scrollLimitMin<o)){s.element.css(s.property,o*s.multiplier+s.addition)}TweenLite.killTweensOf(s.element[0])}else{var u={ease:Circ.easeOut};u[s.property]=t*s.multiplier+s.addition;TweenLite.to(s.element[0],n/1e3,u)}}},refreshTop:function(e,n,r){var i=e.data("scrollBro");var s=i.scrollWrap.height()/i.innerWrap.height();var o=e.children("div.scb_scrollbar").height()/i.scrollWrap.height();if(typeof n!="undefined"){var u=n*s*o;TweenLite.to(i.handle[0],r/1e3,{top:u,ease:Sine.easeOut})}else{var u=e.scrollBro("scrollTop")*s*o;i.handle.css({top:u});if(!i.hasTouch){t.refreshParallax(e)}}},refreshAll:function(){if(typeof window.scrollBro!="undefined"){for(var e in window.scrollBro.scrollers){window.scrollBro.scrollers[e].scrollBro("refresh")}}},transformTimeout:function(n){var r=e("body").data("scrollBroEvent");var i=n.data("scrollBro");if(typeof r!="undefined"&&r.touch){clearTimeout(i.timeout);i.timeout=setTimeout(function(){t.transformTimeout(n)},100)}else{i.scrollWrap.stop(true).animate({"margin-top":0},300)}},transform:function(e,n,r){var i=e.data("scrollBro");i.scrollWrap.stop(true).css({"margin-top":n});clearTimeout(i.timeout);if(n!=0&&typeof r=="undefined"){i.timeout=setTimeout(function(){t.transformTimeout(e)},100)}},events:function(n){var r=n.data("scrollBro");e(window).resize(t.resize);r.scrollWrap.scroll(t.scroll);if(!r.hasT){r.scrollWrap.on("mousewheel",t.mousewheel);r.handle.on("mousedown",t.mousedown);e("body").on("mousemove",t.mousemove);e("body").on("mouseup",t.mouseup)}else{n.on("touchstart",t.touchstart);e("body").on("touchmove",t.touchmove);e("body").on("touchend",t.touchend)}},resize:function(e){t.refreshAll()},scroll:function(n){var r=e(this).closest(".scb_main_wrap");var i=r.scrollBro("scrollTop");var s=r.data("scrollBro");if(!s.hasT){t.refreshTop(r)}r.trigger("scroll")},mousewheel:function(n){var r=e(this).closest(".scb_main_wrap");var i=r.data("scrollBro");if(i.options.wheelTransform){if(n.deltaY==1&&r.scrollBro("scrollTop")==0||n.deltaY==-1&&r.scrollBro("scrollTop")==i.maxScroll){var s=i.scrollWrap.css("margin-top");var o=0;if(typeof s!="undefined"){o=Math.abs(parseInt(s))}t.transform(r,Math.min(o+40,100)*n.deltaY)}else{t.transform(r,0)}}},mousedown:function(n){var r=e(this).closest(".scb_main_wrap");var i=r.data("scrollBro");if(!i.disabled){i.drag=true;i.scrollWrap.css("transition","none");i.handle.css("transition","none");e("body").addClass("disable_select").data("scrollBroEvent",{element:r,startY:t.eventToXY(n).y,scrollTop:r.scrollBro("scrollTop")})}},mouseup:function(n){t.mouseupFn(e(this))},mouseupFn:function(e){var n=e.data("scrollBroEvent");if(n!=null){var e=n.element;var r=e.data("scrollBro");r.drag=false;r.scrollWrap.css("transition","margin 350ms");r.handle.css("transition","margin 350ms");t.transform(e,0)}e.removeClass("disable_select")},mousemove:function(n){var r=e(this).data("scrollBroEvent");if(r!=null){var i=r.element;var s=i.data("scrollBro");if(s.drag){var o=s.scrollWrap.height()/s.innerWrap.height();var u=t.eventToXY(n).y-r.startY;var a=r.scrollTop+u/o;if(a<0||a>s.maxScroll){if(a<0){a=Math.max(r.scrollTop*o+u,-130)}else{a=s.maxScroll+Math.min((-s.maxScroll+r.scrollTop)*o+u,130)}}i.scrollBro("scrollTop",a,0,true)}}},touchstart:function(n){var r=e(this);var i=r.data("scrollBro");if(!i.disabled){var s=r.scrollBro("scrollTop");e("body").data("scrollBroEvent",{element:r,startY:t.eventToXY(n).y,moveY:t.eventToXY(n).y,scrollTop:s,moved:false,touch:true,intervalIndex:0,scrollMark:[],scrollIndex:[]});clearInterval(window.mojinterval);r.scrollBro("scrollTop",s);window.mojinterval=setInterval(t.touchinterval,50)}},touchinterval:function(){var t=e("body").data("scrollBroEvent");var n=t.element;var r=n.data("scrollBro");if(t!=null&&t.touch&&t.moved){var i=t.startY-t.moveY;var s=t.scrollTop+i;n.scrollBro("scrollTop",s,100,true);t.moved=false}r.scrollWrap.trigger("scroll");t.intervalIndex++},touchend:function(n){t.touchendFn(e(this))},touchendFn:function(e){var t=e.data("scrollBroEvent");if(t!=null&&t.touch){var e=t.element;var n=e.data("scrollBro");clearInterval(window.mojinterval);t.touch=false;var r=e.scrollBro("scrollTop");var i=t.scrollMark.length;var s=(t.scrollMark[i-1]-t.scrollMark[0])/(t.scrollIndex[i-1]-t.scrollIndex[0]);if(isNaN(parseFloat(s)))s=0;if(s>10)s=10;if(s<-10)s=-10;var o=r-s*300;if(o<-130){o=-130}else if(o>n.maxScroll+130){o=n.maxScroll+130}var u=1800-150*(10-Math.abs((o-r)/300));s=(o-r)/u;e.scrollBro("scrollTop",o,u)}},touchmove:function(n){var r=e(this).data("scrollBroEvent");if(r!=null&&r.touch){n.preventDefault();var i=r.element;r.moveY=t.eventToXY(n).y;r.moved=true;var s=r.scrollMark.length;if(s==3){for(var o=s-1;o>0;o--){r.scrollMark[o]=r.scrollMark[o-1];r.scrollIndex[o]=r.scrollIndex[o-1]}r.scrollMark[s-1]=t.eventToXY(n).y;r.scrollIndex[s-1]=n.timeStamp}else{r.scrollMark[s]=t.eventToXY(n).y;r.scrollIndex[s]=n.timeStamp}}}};var n={init:function(n){var r=e.extend({wheelTransform:false,parallaxLayers:[]},n);var i=this,s=i.data("scrollBro");if(i.is(e("body"))){}else{i.addClass("scb_main_wrap");i.wrapInner('<div class="scb_inner_wrap" />');i.wrapInner('<div class="scb_scroll_wrap" />');i.append('<div class="scb_scrollbar"><div class="scb_handle"></div></div>')}i.data("scrollBro",{handle:i.children("div.scb_scrollbar").children(".scb_handle"),drag:false,scrollWrap:i.find("div.scb_scroll_wrap:first"),innerWrap:i.find("div.scb_inner_wrap:first"),options:r,maxScroll:0,hasT:"ontouchstart"in window,hasTouch:false,disabled:false});if(typeof window.scrollBro=="undefined")window.scrollBro={scrollers:[]};window.scrollBro.scrollers.push(e(this));e(this).scrollBro("refresh");t.events(i)},scrollAnimate:function(t,n){var r=e(this);var i=r.data("scrollBro");var s=r.scrollBro("scrollTop");if(t<0){TweenLite.to(i.scrollWrap[0],s/n/1e3,{scrollTop:0,onComplete:function(){e("h2:first").html(t/n+" = "+s/n);TweenLite.to(i.scrollWrap[0],-t/n/1e3,{marginTop:-t,onComplete:function(){TweenLite.to(i.scrollWrap[0],.3,{marginTop:0})}})}})}},scrollTop:function(n,r,i,s){var o=e(this);var u=o.data("scrollBro");if(typeof n=="undefined")if(u.hasTouch){return-parseInt(u.scrollWrap.css("margin-top"))}else{return u.scrollWrap.scrollTop()}else if(typeof r=="undefined"||r==0){if(u.hasT){t.refreshParallax(e(this))}if(n<0||n>u.maxScroll){if(n<0){n=Math.max(n,-130)}else{n=u.maxScroll+Math.min(n-u.maxScroll,130)}}else{}TweenLite.killTweensOf(u.scrollWrap[0]);if(u.hasTouch){u.scrollWrap.css("margin-top",-n)}else{u.scrollWrap.scrollTop(n)}}else{clearInterval(window.mojinterval2);var a=0;window.mojinterval2=setInterval(function(){u.scrollWrap.trigger("scroll");a++;if(a>r/50)clearInterval(window.mojinterval2)},50);var f=-1;if(n<0){n=0}else if(n>u.maxScroll){n=u.maxScroll}if(u.hasT){t.refreshTop(e(this),n,r);TweenLite.to(u.scrollWrap[0],r/1e3,{scrollTop:n,ease:Circ.easeOut,onComplete:function(){if(f!=-1&&(typeof i=="undefined"||i==false)){}if(typeof s!="undefined")s()}})}else{TweenLite.to(u.scrollWrap[0],r/1e3,{scrollTop:n,ease:Circ.easeOut,onComplete:function(){if(f!=-1&&(typeof i=="undefined"||i==false)){}if(typeof s!="undefined")s()}})}t.refreshParallax(e(this),n,r)}},refresh:function(){$this=e(this);if(typeof $this!="undefined"){var n=$this.data("scrollBro");var r=n.scrollWrap.height()/n.innerWrap.height();var i=$this.children("div.scb_scrollbar").height()*r;n.handle.css({height:i});n.innerWrap.width($this.width());n.maxScroll=n.innerWrap.height()-n.scrollWrap.height();t.refreshTop($this);t.refreshParallax($this)}},option:function(t,n){if(typeof t!="undefined"){var r=e(this).data("scrollBro");if(typeof n!="undefined"){r.options[t]=n;return e(this)}else{return r.options[t]}}},disable:function(){var n=e(this);var r=n.data("scrollBro");if(!r.hasTouch){t.mouseupFn(e("body"))}else{t.touchendFn(e("body"))}r.disabled=true},enable:function(){var t=e(this);var n=t.data("scrollBro");n.disabled=false},destroy:function(){}};e.fn.scrollBro=function(t){if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return n.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.timeline")}}})(jQuery)